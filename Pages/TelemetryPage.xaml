<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BOMS.Pages.TelemetryPage"
             Title="Telemetry">

  <VerticalStackLayout Padding="12" Spacing="10">

    <!-- Header: group picker (left) + compact connect button (right) -->
    <Grid ColumnDefinitions="Auto,*,Auto">
      <Picker x:Name="GroupPicker"
              Title="Group"
              SelectedIndexChanged="OnGroupChanged"
              WidthRequest="140">
        <Picker.Items>
          <x:String>alpha</x:String>
          <x:String>bravo</x:String>
          <x:String>charlie</x:String>
        </Picker.Items>
      </Picker>

      <Button Grid.Column="2"
              Text="Connect"
              WidthRequest="110"
              HorizontalOptions="End"
              Padding="12,6"
              Clicked="OnConnect"/>
    </Grid>

    <!-- Live feed -->
    <CollectionView ItemsSource="{Binding Telemetry}">
      <CollectionView.ItemTemplate>
        <DataTemplate>
          <HorizontalStackLayout Padding="4" Spacing="10">
            <Label Text="{Binding DeviceId}" WidthRequest="80"/>
            <Label Text="{Binding Cpu, StringFormat='CPU {0:F1}%'}" WidthRequest="120"/>
            <Label Text="{Binding Mem, StringFormat='MEM {0:F1}%'}" WidthRequest="130"/>
            <Label Text="{Binding At, StringFormat='{0:HH:mm:ss}'}"/>
          </HorizontalStackLayout>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>

  </VerticalStackLayout>
</ContentPage>
